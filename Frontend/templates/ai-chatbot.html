{% extends "base.html" %}

{% block content %}
<title>AI Chatbot - StatSouls</title>
<div class="chat-container">
    <div class="chat-header">
        <h1>StatSouls AI Assistant</h1>
        <p>Ask me anything about Elden Ring!</p>
    </div>
    <div class="chat-messages" id="chat-messages">
        <div class="message bot-message">
            Hello! I'm your Elden Ring assistant. How can I help you today?
        </div>
    </div>
    <div class="chat-input-container">
        <textarea id="chat-input" placeholder="Type your message here..." rows="1"></textarea>
        <button id="send-button">Send</button>
    </div>
</div>

<script>
    const input = document.getElementById('chat-input');
    const sendButton = document.getElementById('send-button');
    const messagesContainer = document.getElementById('chat-messages');

    // Auto-resize textarea
    input.addEventListener('input', function() {
        this.style.height = 'auto';
        this.style.height = this.scrollHeight + 'px';
    });

    function addMessage(message, isUser) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
        messageDiv.textContent = message;
        messagesContainer.appendChild(messageDiv);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
    }

    async function sendMessage() {
        const message = input.value.trim();
        if (!message) return;

        addMessage(message, true);
        input.value = '';
        input.style.height = 'auto';

        // TODO: Add API call to backend here
        // For now, just show a mock response
        setTimeout(() => {
            addMessage("I'm still being developed. Check back soon!", false);
        }, 1000);
    }

    sendButton.addEventListener('click', sendMessage);
    input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendMessage();
        }
    });
</script>
{% endblock %}